<div class="container">
  <h1>Premium Calculator</h1>

  <form [formGroup]="premiumForm" class="premium-form">
    <div class="form-group">
      <label for="name">Name *</label>
      <input
        id="name"
        type="text"
        formControlName="name"
        class="form-control"
        placeholder="Enter your name">
      <div *ngIf="premiumForm.get('name')?.invalid && premiumForm.get('name')?.touched" class="error">
        Name is required
      </div>
    </div>

    <div class="form-group">
      <label for="ageNextBirthday">Age Next Birthday *</label>
      <input
        id="ageNextBirthday"
        type="number"
        formControlName="ageNextBirthday"
        class="form-control"
        placeholder="Enter age next birthday">
      <div *ngIf="premiumForm.get('ageNextBirthday')?.invalid && premiumForm.get('ageNextBirthday')?.touched" class="error">
        <span *ngIf="premiumForm.get('ageNextBirthday')?.errors?.['required']">Age is required</span>
        <span *ngIf="premiumForm.get('ageNextBirthday')?.errors?.['min'] || premiumForm.get('ageNextBirthday')?.errors?.['max']">
          Age must be between 1 and 100
        </span>
      </div>
    </div>

    <div class="form-group">
      <label for="dateOfBirth">Date of Birth (MM/YYYY) *</label>
      <input
        id="dateOfBirth"
        type="text"
        formControlName="dateOfBirth"
        class="form-control"
        placeholder="MM/YYYY">
      <div *ngIf="premiumForm.get('dateOfBirth')?.invalid && premiumForm.get('dateOfBirth')?.touched" class="error">
        Date of Birth is required
      </div>
    </div>

    <div class="form-group">
      <label for="occupation">Usual Occupation *</label>
      <select
        id="occupation"
        formControlName="occupation"
        class="form-control">
        <option value="">Select Occupation</option>
        <option *ngFor="let occ of occupations" [value]="occ.value">
          {{occ.name}}
        </option>
      </select>
      <div *ngIf="premiumForm.get('occupation')?.invalid && premiumForm.get('occupation')?.touched" class="error">
        Occupation is required
      </div>
      <div *ngIf="selectedOccupationDetails" class="occupation-details">
        <small>Rating: {{getOccupationRating()}} | Factor: {{getOccupationFactor()}}</small>
      </div>
    </div>

    <div class="form-group">
      <label for="deathSumInsured">Death - Sum Insured *</label>
      <input
        id="deathSumInsured"
        type="number"
        formControlName="deathSumInsured"
        class="form-control"
        placeholder="Enter sum insured amount">
      <div *ngIf="premiumForm.get('deathSumInsured')?.invalid && premiumForm.get('deathSumInsured')?.touched" class="error">
        <span *ngIf="premiumForm.get('deathSumInsured')?.errors?.['required']">Sum Insured is required</span>
        <span *ngIf="premiumForm.get('deathSumInsured')?.errors?.['min']">Sum Insured must be greater than 0</span>
      </div>
    </div>

    <div class="premium-display" *ngIf="monthlyPremium > 0">
      <h2>Monthly Premium</h2>
      <p class="premium-amount">${{monthlyPremium | number:'1.2-2'}}</p>
    </div>
  </form>
</div>

<router-outlet />